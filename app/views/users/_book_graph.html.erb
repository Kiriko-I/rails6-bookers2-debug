<h2>７日間分の投稿数</h2>
  <table class='table table-bordered'>
    <thead>
      <tr>
        <th>６日前</th>
        <th>５日前</th>
        <th>４日前</th>
        <th>３日前</th>
        <th>２日前</th>
        <th>１日前</th>
        <th>今日</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><%= @books.created_6days_ago.count %></td>
        <td><%= @books.created_5days_ago.count %></td>
        <td><%= @books.created_4days_ago.count %></td>
        <td><%= @books.created_3days_ago.count %></td>
        <td><%= @books.created_2days_ago.count %></td>
        <td><%= @books.created_yesterday.count %></td>
        <td><%= @books.created_today.count %></td>
      </tr>
    </tbody>
  </table>
</div>
<canvas id="myChart"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('myChart');

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['６日前', '５日前', '４日前', '３日前', '２日前', '１日前','今日'],
      datasets: [{
        label: '投稿した本の数',
        data: [
          <%= @books.created_6days_ago.count %>,
          <%= @books.created_5days_ago.count %>,
          <%= @books.created_4days_ago.count %>,
          <%= @books.created_3days_ago.count %>,
          <%= @books.created_2days_ago.count %>,
          <%= @books.created_yesterday.count %>,
          <%= @books.created_today.count %>
          ],
          borderColor: 'blue',
          lineTension: 0.3,
      }]
    },
    options: {
      title: {
        display: true,
        text: '７日間の投稿数の比較'
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            stepSize: 1
          }
        }
      },
    }
  });
</script>
